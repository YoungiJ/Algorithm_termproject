<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>BusyBees</title>
  <link rel="stylesheet" href="../css/next.css">
</head>
  <body>
    <header>
      <h1>BusyBeesüêù</h1>
      <nav>
        <ul>
          <li><a href="../index.html"><b>HOME</b></a></li>
          <li><a href="../index.html"><b>MY PAGE</b></a></li>
        </ul>
      </nav>
    </header>
    <main>
      <div id="map"></div>
      <div id="form-container">
        <form>
          <div class="button-container">
            <button id="plusButton" type="button" onclick="addWaypoint()">+</button>
            <button id="minusButton" type="button" onclick="removeWaypoint()">-</button>
          </div>

          <!-- Ï∂úÎ∞úÏßÄ ÏûÖÎ†• ÌïÑÎìúÏôÄ ÏûêÎèôÏôÑÏÑ± Î™©Î°ù -->
          <div class="input-wrapper">
            <input type="text" placeholder="departure" id="start">
            <ul id="start-autocomplete-list" class="autocomplete-list"></ul>
          </div>

          <!-- Í≤ΩÏú†ÏßÄ ÏûÖÎ†• ÌïÑÎìúÏôÄ ÏûêÎèôÏôÑÏÑ± Î™©Î°ù -->
          <!-- Ïã§Ï†ú ÏΩîÎìúÏóêÏÑúÎäî Í∞Å Í≤ΩÏú†ÏßÄ ÏûÖÎ†•ÎûÄÎßàÎã§ Í≥†Ïú†Ìïú IDÎ•º Î∂ÄÏó¨ÌïòÍ≥†, ÏûêÎ∞îÏä§ÌÅ¨Î¶ΩÌä∏Î°ú Ï∂îÍ∞ÄÌï¥Ïïº Ìï©ÎãàÎã§. -->
          <div id="waypoints-container">
            <input type="text" placeholder="stopover" class="waypoint-input">
            <ul id="waypoint-autocomplete-list" class="autocomplete-list"></ul>
          </div>

          <!-- ÎèÑÏ∞©ÏßÄ ÏûÖÎ†• ÌïÑÎìúÏôÄ ÏûêÎèôÏôÑÏÑ± Î™©Î°ù -->
          <div class="input-wrapper">
            <input type="text" placeholder="arrival" id="destination">
            <ul id="destination-autocomplete-list" class="autocomplete-list"></ul>
          </div>
          <button type="submit">Í≤ÄÏÉâ</button>
        </form>
      </div>
    </main>
    <footer>
      <!-- .rounded-boxÎ•º footer ÎÇ¥Î∂ÄÏóê Î∞∞ÏπòÌï©ÎãàÎã§ -->
      <div class="rounded-box">
        <div id="distance"><b>DISTANCE </b></div><br>
        <div id="duration"><b>üö∂‚Äç‚ôÇÔ∏èPATH</b></div>
        <div id="time"><b>üö∂‚Äç‚ôÇÔ∏èESTIMATED TIME</b></div>
        <div id="calorieResult"></div>
      </div>
    </footer>

    <!-- Ïπ¥Ïπ¥Ïò§Îßµ API Ïä§ÌÅ¨Î¶ΩÌä∏ -->
    <script type="text/javascript" src="https://dapi.kakao.com/v2/maps/sdk.js?appkey=4aaaab13e8df34cb92f85f80a8e42bad"></script>
    <!-- Î©îÏù∏ JavaScript ÌååÏùº -->
    <script src="../js/next.js"></script>
    <script src="../js/search.js"></script>
    <script src="../js/shortest_distance.js"></script>
    <!-- ÏπºÎ°úÎ¶¨ Í≥ÑÏÇ∞ JS   -->
    <!-- Ìèº Ï†úÏ∂ú Ïù¥Î≤§Ìä∏ Î¶¨Ïä§ÎÑà -->
<script>
  document.getElementById('form-container').addEventListener('submit', function(event) {
    event.preventDefault();

    // Your existing form submission logic...

    // Call calculateCalorie function with the latest userWeight and storedShortestDistance
    calculateCalorie();
  });

  document.addEventListener('DOMContentLoaded', function() {
    // Retrieve data from localStorage
    var storedShortestDistance = localStorage.getItem('shortestDistance');
    var userWeight = localStorage.getItem('weight');
  
    // Display the retrieved data in the console
    console.log('Stored Shortest Distance:', storedShortestDistance);
    console.log('User Weight:', userWeight);

    // Call calculateCalorie function with the initial values
    calculateCalorie();
  });

  function calculateCalorie() {
    // Your existing calculateCalorie function logic
    var distance = document.getElementById("distance").innerText;
    var duration = document.getElementById("duration").innerText;

    // Retrieve the latest values from localStorage
    var storedShortestDistance = localStorage.getItem('shortestDistance');
    var userWeight = localStorage.getItem('weight');

    // Parse the values to numbers
    var weight = parseFloat(userWeight);
    var distanceValue = parseFloat(storedShortestDistance);
 
    var calorie=(weight*0.035)+(distanceValue*0.04)
    // Display the calculated calorie result in the HTML element
    var calorieResult = document.getElementById("calorieResult");
    calorieResult.innerText = calorie.toFixed(2) + "kcal";
  }
</script>

  </body>
</html>
